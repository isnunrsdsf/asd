let settings = {
  token: prompt("Enter your Token: "), //"MTExNDA3MDc0MzQ0NjIwODU5Mw.GX7YSP.CIrbc7XyqFcSdF_LYEgwOV3lR1gyjrFa6oPB_8", //
  dmed: [],
  bots: [
    "704521096837464076",
    "616754792965865495",
    "159985870458322944",
    "240254129333731328",
    "884508298060132393",
    "536991182035746816",
    "914215932405096459",
    "892847850780762122",
    "458276816071950337",
    "922492776719982682",
    "515067662028636170",
    "933048480019132437",
    "491769129318088714",
    "235148962103951360",
    "1067161068050329732",
    "155149108183695360",
    "168274283414421504",
    "554631615565922364",
    "532282191208775680",
    "922044637026340884",
    "722196398635745312",
    "967889999443943454",
    "730778862203437068",
    "912207954428698645",
    "633565743103082527",
    "720351927581278219",
    "508391840525975553",
    "875525473139048519",
    "272937604339466240",
    "294882584201003009",
    "470724017205149701",
    "530082442967646230",
    "713026372142104687",
    "235088799074484224",
    "622457112391319584",
    "919574075133816843",
    "898227015956701185",
    "873934253468024852",
    "947658499016499250",
    "976444432637382677",
    "897849984442048602",
    "976770888043225108",
    "902442121376702514",
    "884486416510373949",
    "958406015089528833",
    "941115891247116409",
    "967155551211491438",
    "563434444321587202",
    "548410451818708993",
    "697173663048269874",
    "943651175931187220",
    "877570321836818502",
    "204255221017214977",
    "338222603829510164",
    "768268608639598624",
    "943616006910279711",
    "810918366045798451",
    "1095493920890310706",
    "977566514746097695",
    "292953664492929025",
    "993864497192251453",
    "1100343111818944562",
    "884533145993617460",
    "512333785338216465",
    "631048498002919434",
    "730417940830093394",
    "939259310326837278",
    "1005148827533189141",
    "947442027635806318",
    "964429474227716097",
    "987465819053248573",
    "868172385000509460",
    "292212176494657536",
    "940728735865384961",
    "686153683309691046",
    "368105370532577280",
    "877650048018685983",
    "641385620530266125",
    "886470386752049173",
    "597776518441336862",
    "1034459821002477658",
    "557628352828014614",
    "814516968396161024",
    "1030119791375171664",
    "732227775012012094",
    "901849914714259577",
    "651095740390834176",
    "1030579851024928859",
    "958477045602594906",
    "412347257233604609",
    "765210105569869865",
    "873306864769712199",
    "1095691078860017744",
    "1030460372815187989",
    "478645426883526658",
    "897192233990762556",
    "652938911642943498",
    "282859044593598464",
    "972769135698260028",
    "953835703970721862",
    "892446523323985961",
    "961350515751522304",
    "961684731001470996",
    "988038995600621578",
    "190258354495553536",
    "1085589119050190860",
    "792081366862790687",
    "437808476106784770",
    "411916947773587456",
    "116275390695079945",
    "757485003394383902",
    "781228600740806686",
    "789797049746980895",
    "1063000197648613386",
    "1107914499442356224",
    "1122529474026680384",
    "928434491901489183",
    "1132245686595883109",
    "850066255472885800",
    "892057326008291418",
    "897020416747520040",
    "547905866255433758",
    "916611530404012032",
    "996272281288445972",
    "1009281548861841438",
    "927344636337459241",
    "437618149505105920",
    "932851938599514173",
    "1127695331371528283",
    "1115680269110886410",
    "947863296789323776",
    "666310579086164007",
    "310848622642069504",
    "432533456807919639",
    "980100443587878963",
    "1049492811118022696",
    "1097417179760164944",
    "1009454530573910016",
    "923627210022207518",
    "768534891154374768",
    "991374230522429570",
    "967422632666476594",
    "715621848489918495",
    "905229442761232505",
    "1027121297009934384",
    "1082547274275631164",
    "416358583220043796",
    "1030062622025986079",
    "859401088545062963",
    "879602864891240478",
    "880126034555580517",
    "880129423498674286",
    "830530156048285716",
    "1049212787873812511",
    "1034999125093142669",
    "1071229135977971753",
    "1006846793050488982",
    "1082268534425518211",
    "1082874002109906984",
    "703886990948565003",
    "944551417421643779",
    "201503408652419073",
    "1029065965595537468",
    "576395920787111936",
    "475393791902351360",
    "475184093840015370",
    "911097409575202866",
    "975939972542648360",
    "965435561160605746",
    "1057438908192919614",
    "944127918987157514",
    "863168632941969438",
    "1095429914276139168",
    "905139837353476127",
    "847274599821082625",
    "936596918375694336",
    "936881301364047882",
    "936882247871647795",
    "936882739049811998",
    "1128004728446517378",
    "234395307759108106",
    "437616925535633409",
    "722564657268916255",
    "684617609932701699",
    "716967712844414996",
    "501982335076532224",
    "877269130456219738",
    "1034552891270250586",
    "470722416427925514",
    "558996910581612545",
    "710034409214181396",
    "1001555082447421590",
    "617037497574359050",
    "1072709013235585126",
    "689211625781330008",
    "480240313525600267",
    "1128130718787190824",
    "931204222450548748",
    "966343570304954458",
    "1046079921723822180",
    "1103702355221942323",
    "1072874477043581031",
    "866096633006260234",
    "939153117419819009",
    "1090464912179998801",
    "453939662168260612",
    "964213796342218802",
    "869376111698645033",
    "929920953201352724",
    "524652984425250847",
    "988827988588134510",
    "990416407365824612",
    "990425642111762432",
    "990426881834754049",
    "990427844075212860",
    "990428516157882418",
    "990429321292288120",
    "990423636202647562",
    "951586941617442836",
    "849365015274061894",
    "962140425332850729",
    "1028432279221047296",
    "451379187031343104",
    "634852069962022913",
    "1108118902740877442",
    "941021809007005707",
    "906886535784321054",
    "952299670149922916",
    "917378200592592910",
    "266044720864559106",
    "934249180971552808",
    "1080345135675617311",
    "967423479395778580",
    "347378323418251264",
    "924022255867011112",
    "958852395595599892",
    "894373721257672745",
    "986343597668454461",
    "275813801792634880",
    "324631108731928587",
    "474051954998509571",
    "567703512763334685",
    "694278840855298079",
    "894881861388627998",
    "936929561302675456",
    "960601249613492244",
    "976699886890254356",
    "990363988422447154",
    "1031212289187139585",
    "1041447618024321066",
    "1057409003950440568",
    "1095062379554943017",
    "268478587651358721",
    "395274201881247745",
    "680188360232403018",
    "700145482957324289",
    "716390085896962058",
    "770875503308439593",
    "775606777681149992",
    "778858575955099659",
    "819778342818414632",
    "820560654267187230",
    "847826282389569556",
    "817736253717348383",
    "901985818594385980",
    "900972581165879306",
    "754727459169108130",
    "775025797034541107",
    "830666940196323369",
    "829746982205128714",
    "1020273206248091658",
    "302050872383242240",
    "1014242261090963526",
    "736999684471521321",
    "758798038134947880",
    "899448354814193736",
    "908355411919372388",
    "914246761357377536",
    "911165270842830941",
    "444514223075360800",
    "815703008075579422",
    "957481307405975552",
    "708096305477451846",
    "841541855236980766",
    "961587307033526272",
    "1002959669117063258",
    "934813209804800000",
    "439253447166918666",
    "1079984769133183116",
    "741968739825746072",
    "766652164038459422",
    "418842777720193037",
    "1034363497913524254",
    "973116459628777522",
    "837356530248319026",
    "841649332537393153",
    "907749776395759627",
    "1061996615109455954",
    "715906723982082139",
    "1000730532373594114",
    "827062604740558848",
    "890293464955228192",
    "930270423084585021",
    "981255368892100608",
    "1040351791159717918",
    "360081866461806595",
    "852645651661848576",
    "333468973410680833",
    "839028103527268362",
    "994775624197623838",
    "997256424293937233",
    "1013125924310482964",
    "1078479782225903676",
    "844829012169982012",
    "1110045219522629755",
    "1075775143365840996",
    "1078212744936956005",
    "1078213379430297671",
    "1078213725649113108",
    "1078215932788350977",
    "1017863488162500650",
    "967219648955301899",
    "999984999535226991",
    "853327905357561948",
    "951998287047708692",
    "876919126185103360",
    "314230903872421889",
    "506918730790600704",
    "760074197053210694",
    "947925500733562950",
    "834463193350144031",
    "1124544526288175114",
    "756985398957179052",
    "973683870203543663",
    "228537642583588864",
    "946024578818383932",
    "1130319955351588924",
    "758393254944702516",
    "890165567942701066",
    "894668400759033857",
    "895516088228511815",
    "905518774403354664",
    "948955033897148416",
    "1025035164402843749",
    "1044466960802521098",
    "838741670626590740",
    "835670704456073278",
    "904723746475081728",
    "550613223733329920",
    "899440131692457994",
    "1019284825775022192",
    "783708073390112830",
    "947974782614380624",
    "1006160569751056404",
    "1094853156267118613",
    "1081282659487076383",
    "1079886172936995008",
    "1079886600869261393",
    "1079886846420598924",
    "1080119797183942726",
    "1085011551309791392",
    "1072205354450030642",
    "1090829392067969054",
    "1079027111949512714",
    "534589798267224065",
    "758592094964285441",
    "487328045275938828",
    "674885857458651161",
    "894526591324016671",
    "963092724448378933",
    "474841349968101386",
    "510016054391734273",
    "564426594144354315",
    "964481615868887070",
    "461791942779338762",
    "693167035068317736",
    "942894927115866202",
    "814626882569633792",
    "904575721429663785",
    "998059760098217985",
    "417385666763161600",
    "749729175765516470",
    "893159725087215626",
    "894526135302504458",
    "894526480170774528",
    "943232416292687954",
    "807692666107985941",
    "893156375935479880",
    "893452113793933333",
    "1024171941533323294",
    "372022813839851520",
    "499595256270946326",
    "1001377184591663114",
    "1017609395070304377",
    "276060004262477825",
    "855372526875574273",
    "722816933996789812",
    "184405311681986560",
    "239631525350604801",
    "282286160494067712",
    "422087909634736160",
    "822117936251928586",
    "826240098235449366",
    "893428577608019978",
    "929940481562005505",
    "403419413904228352",
    "432610292342587392",
    "475744554910351370",
    "500658624109084682",
    "722141347603284001",
    "958481137297145856",
    "936385063115980901",
    "551608985900417024",
    "620307267241377793",
    "974687105479479366",
    "975307488389898290",
    "975807392891695194",
    "959878988367536199",
    "1088126222166392943",
    "420675394224521240",
    "444871677176709141",
    "507415798189654016",
    "571661221854707713",
    "628400349979344919",
    "1039706764301570120",
    "1117079738503151637",
    "401328409499664394",
    "559426966151757824",
    "614109280508968980",
    "645343657075146772",
    "951944353230770266",
    "1006503434406613002",
    "1094273297962774709",
    "993040486111653908",
    "1018722314000543815",
    "1037413035259732029",
    "1032477808301191220",
    "1060135204074827798",
    "1049699903275806802",
    "966707610789224498",
    "707045569713143829",
    "866956216420007946",
    "892765715134812200",
    "385824713819029504",
    "896549597550358548",
    "888052145734172732",
    "900371871625777212",
    "934155705278144563",
    "934831480922849321",
    "270904126974590976",
    "705016654341472327",
    "849358659897262080",
    "951392843954552864",
    "579258692663377923",
    "992345940054781952",
    "1030268836081061928",
    "963018384096784384",
    "1080547065844744263",
    "1092173915641610270",
    "1120927055656259584",
    "1005047749273727007",
    "1033139060983730237",
    "919936064532127804",
    "927008889092857898",
    "987211936074715206",
    "1104608395534815322",
    "926752586474848309",
    "1061782332169801888",
    "946189542204014714",
    "1082855696946704484",
    "776936825667059773",
    "543771182936358912",
    "902242403178647602",
    "940330565561876480",
    "980154113637646346",
    "461171501715161108",
    "808346067317162015",
    "1014127564391972917",
    "1026913825410260992",
    "919585355911528478",
    "1026270735397826661",
    "866057672541732894",
    "827285522614452285",
    "1010286508009340998",
    "739823232651100180",
    "899785325910577223",
    "925525660598951988",
    "941207812254621706",
    "961460998479413359",
    "706935674800177193",
    "966838696546566205",
    "927749995757699113",
    "256556410031046657",
    "574652751745777665",
    "725721249652670555",
    "1024439330904744076",
    "1037843336951767070",
    "978312705263960154",
    "356065937318871041",
    "899673884582883398",
    "905936051099566090",
    "909534425719664712",
    "1042786355127787540",
    "1062745996465029120",
    "1062276265933017099",
    "1066378539408052235",
    "1092466306940416051",
    "1099720228688117792",
    "970614599386804224",
    "877344071256010792",
    "927618897769803887",
    "933700767548866591",
    "1041756016259387553",
    "1039846503696564224",
    "1095835733098508320",
    "1037131610807603300",
    "584213384409382953",
    "958635757424246804",
    "973105251886452796",
    "902696949512278066",
    "1038242090452271124",
    "1050565574280876033",
    "1052282710925770792",
    "1108574820549009408",
    "751080162300526653",
    "751080770243657779",
    "266162291735658496",
    "550035183269838848",
    "809853895450427403",
    "1046590616705962074",
    "1087415274589921321",
    "472911936951156740",
    "1027092208777695252",
    "1042221963659198645",
    "668075833780469772",
    "1049413890276077690",
    "1105427602698666026",
    "1114139299236036618",
    "1021025703493378179",
    "906422339674189835",
    "939898450324103240",
    "591016476069068801",
    "949021478152699934",
    "1049697101375873034",
    "1100670407813644359",
    "949920257718517780",
    "948558038577594408",
    "1076558193007796314",
    "736610809597264032",
    "613156357239078913",
    "744906785843970139",
    "1031508059513683979",
    "1064359134042013846",
    "823271140410916986",
    "950948759293034576",
    "956504762155671612",
    "964501755742257192",
    "976478213209468978",
    "995201758869598238",
    "995203293053726820",
    "995204114898231346",
    "995204785965903972",
    "995205587845521409",
    "995206075437568070",
    "1002904415046484008",
    "1071151972289360012",
    "330416853971107840",
    "569936566965764126",
    "626152052963147787",
    "980465172147740673",
    "683344877160890383",
    "1035309244007841923",
    "1107604666101010452",
    "356831787445387285",
    "678344927997853742",
    "946951158717644800",
    "969066999747584050",
    "970531176722862111",
    "1027096867558924299",
    "1077740178476630129",
    "1094376369141583893",
    "1115689348432658513",
    "713586207119900693",
    "785719830640328704",
    "800383254389194754",
    "938837213926547467",
    "947772389712859177",
    "949050435254255677",
    "949678085022838854",
    "968320182311342150",
    "894527205462384671",
    "893159301655433236",
    "369208607126061057",
    "424606447867789312",
    "825617171589759006",
    "933304639795904532",
    "947560229661450290",
    "1081781216698695690",
    "1085680709768855614",
    "349920059549941761",
    "788814313930096662",
    "1002249563551322153",
    "1032960648612691978",
    "974145886559027260",
    "320218020855414787",
    "491614535812120596",
    "917441625674883092",
    "931455331068940308",
    "937748367235235861",
    "939911928275406879",
    "940927387279970375",
    "943053840712867881",
    "950355382918860850",
    "955393895217389629",
    "1094018779190677584",
    "981134345324597298",
    "380861021893689345",
    "501463200684965910",
    "857363725752074280",
    "917545120629391410",
    "927613829381259345",
    "1064157785211813968",
    "490039330388180992",
    "519287796549156864",
    "551829966602502183",
    "792842038332358656",
    "1041539150215663678",
    "1108799216354082918",
    "948238275414458378",
    "851436490415931422",
    "968896356083171328",
    "484395597508509697",
    "934592390956732476",
    "506186003816513538",
    "909633697974738954",
    "949777616100003912",
    "1000125576943775885",
    "1022444034196787281",
    "1037461902768484412",
    "1039117126696452148",
    "921419248558047233",
    "861421960813346836",
    "997512563422142535",
    "492777075522928661",
    "653989674339008533",
    "764554729476194315",
    "1025022254104449024",
    "1073720978460377211",
    "1076793798765576193",
    "1101953891328856205",
    "1073640311068311693",
    "772534784127402024",
    "932897843365150780",
    "1074419020448665681",
    "478202666355523585",
    "766969954779136010",
    "925322475263365120",
    "543974987795791872",
    "941132138173059102",
    "1026373682702057522",
    "687305043518685184",
    "1025461518625669182",
    "1067167907580223498",
    "1074622204207181844",
    "1133118361010716774",
    "1134660337065541712",
    "973645674082099272",
    "982343084929081344",
    "937765812746461275",
    "900498639183552543",
    "470722753218084866",
    "962192216556728350",
    "984220948276318228",
    "974038811497611314",
    "973645290668191784",
    "900511373660913714",
    "962192266200514590",
    "338897906524225538",
    "862102568146567188",
    "973644697773944833",
    "895426117660459080",
    "890605536205217903",
    "902052123058003968",
    "962192341987385355",
    "898671533730459698",
    "932788436975366144",
    "962149824109609000",
    "962192578877464608",
    "984220879154204753",
    "901140964620529714",
    "1002632424469057587",
    "929102007791403048",
    "309408702530846730",
    "365822512447225857",
    "765501015842750494",
    "770360651574411294",
    "918146218511708260",
    "1031103866449702972",
    "1059225930121363569",
    "946044940008435803",
    "864148078733951006",
    "998766103792721952",
    "1014014964987600946",
    "1017210305698353192",
    "1029879561665650790",
    "900742232775209011",
    "900742258398203984",
    "900742283056517152",
    "927636547661090856",
    "949710366319972382",
    "950933570564800552",
    "958023265962561636",
    "383995098754711555",
    "656621136808902656",
    "728211453131096115",
    "918306813391294484",
    "1024955823497166909",
    "829589688083284009",
    "1085034170776043541",
    "1006183286445449226",
    "1006165699523260467",
    "1105577301720182797",
    "981122684303855647",
    "600453439784353956",
    "963828716323086426",
    "978140010584891412",
    "1108544103098101821",
    "963748825204396092",
    "828613785345458206",
    "857023179210096674",
    "907694297497886720",
    "1074569249357578280",
    "890924449707212840",
    "897166141707931649",
    "955920403526746142",
    "861786742087483412",
    "902576882434867300",
    "832731781231804447",
    "474690373000888321",
    "494177474192736270",
    "757872865252212797",
    "1123983950445031476",
    "1124285905000222810",
    "592968118905733120",
    "708616355024207884",
    "890842672133201950",
    "976195845131214958",
    "1008055932535718040",
    "1014312377426128937",
    "1018438974865412146",
    "1018917306576928828",
    "886226011417636874",
    "205190545914462208",
    "846634589421043722",
    "1111427309577179167",
    "1028638935590645830",
    "810814112040747019",
    "951548362874814574",
    "252128902418268161",
    "409875566800404480",
    "471542070817849355",
    "395385545326592010",
    "818420448131285012",
    "298822483060981760",
    "952524514879737906",
    "1072197048973140001",
    "675996677366218774",
    "1006824078872690699",
    "339254240012664832",
    "968727328727400541",
    "996605976633421844",
    "1065199177061109831",
    "1086686011972669450",
    "1126636757950152764",
    "904047824990261329",
    "1129189668840276040",
    "1132122492736127009",
    "979156576474628127",
    "989780921806893066",
    "993586108174704670",
    "947634608382545940",
    "985043126290894850",
    "949253136365785139",
    "790224789067268106",
    "1106635113716002816",
    "1108920393923842070",
    "1117840971464454196",
    "479147589363826688",
    "475503071724568586",
    "518213843344687130",
    "1141678671564906526",
    "917630803314352208",
    "1139894523338690611",
    "1072118621809156116",
    "375805687529209857",
    "853006142540087337",
  ],
  timeouts: {
    timeout1: 1500, //the wait after sending the dm and checking if there is a captcha
    timeout2: 1500, //checking the status after sending the friend request
    timeout3: 500, //initial checking for captcha
    timeout4: 500, //captchacheck bad friend close prompt
    timeout5: 1000, //each check for if captcha passed
    timeout6: 500, //check if bot when opening dm
    timeout7: 1000, //create dm and open home check
    timeout8: 500, //start after getting the guild
    timeout9: 2500, //timeout per dm
    timeout10: 5000, //timeout per search
  },
  dmmessage:
    "Hello <userid>! I'm Justine, an author at The Verge. I am reaching out to inquire if you would be open to the idea of having an article written about your project. Our team has taken notice of your server and we believe that it truly stands out among others in the space. If you are interested in the possibility of a feature article, please feel free to reach out. We would be happy to discuss this further with you.",
  roles_dm: true,
  channel_dm: true,
  min_dm_per_server: 2,
  status: "Idle",
  stats: {
    dms_sent: 0,
    session: {
      dms_sent: 0,
      owner_dms_sent: 0,
      fq_adds: 0,
      captchas_solved: 0,
      servers_dmed: 0,
    },
  },
};
var div;
async function delay(duration) {
  return new Promise((resolve) => {
    setTimeout(resolve, duration);
  });
}
async function sessionupdate() {
  document.getElementById(
    "dms_sent"
  ).innerText = `${settings.stats.session.dms_sent}`;
  document.getElementById(
    "owner_dms_sent"
  ).innerText = `${settings.stats.session.dms_sent}`;
  document.getElementById(
    "fq_adds"
  ).innerText = `${settings.stats.session.fq_adds}`;
  document.getElementById(
    "captchas_solved"
  ).innerText = `${settings.stats.session.captchas_solved}`;
  document.getElementById(
    "servers_dmed"
  ).innerText = `${settings.stats.session.servers_dmed}`;
  document.getElementById("status").innerText = `${settings.status}`;
}
async function add_dms_sent() {
  settings.stats.session.dms_sent++;
  settings.stats.dms_sent++;
  document.getElementById(
    "dms_sent"
  ).innerText = `${settings.stats.session.dms_sent}`;
}
async function add_owner_dms_sent() {
  settings.stats.session.owner_dms_sent++;
  document.getElementById(
    "owner_dms_sent"
  ).innerText = `${settings.stats.session.owner_dms_sent}`;
}
async function add_fq_adds() {
  settings.stats.session.fq_adds++;
  document.getElementById(
    "fq_adds"
  ).innerText = `${settings.stats.session.fq_adds}`;
}
async function add_captchas_solved() {
  settings.stats.session.captchas_solved++;
  console.log(
    "captcha solvewd added:" + settings.stats.session.captchas_solved
  );
  document.getElementById(
    "captchas_solved"
  ).innerText = `${settings.stats.session.captchas_solved}`;
}
async function add_servers_dmed() {
  settings.stats.session.servers_dmed++;
  document.getElementById(
    "servers_dmed"
  ).innerText = `${settings.stats.session.servers_dmed}`;
}
async function set_status(message) {
  settings.status = message;
  document.getElementById("status").innerText = `${settings.status}`;
}
div = document.createElement("div");
div.innerHTML = `
      <strong>Session DMS Sent: <strong id="dms_sent"> 0 </strong></strong><br>
      <strong>Session Owner DMS Sent: <strong id="owner_dms_sent"> 0 </strong></strong><br>
      <strong>Session FQ Adds: <strong id="fq_adds"> 0 </strong></strong><br>
      <strong>Session Captchas Solved: <strong id="captchas_solved"> 0 </strong></strong><br>
      <strong>Session Servers Dmed: <strong id="servers_dmed"> 0 </strong></strong><br><br>

      <strong>Status: <strong id="status"></strong></strong>
    `;
div.style =
  "border: 2px solid white; position: absolute; width: 300px; height: 150px; bottom: 80px; right: 20px; z-index: 1000; fill-opacity: 0.1; background-color: #202124; color: white; border-radius: 10px; padding: 5px;";
document.body.appendChild(div);

function showNotification(message) {
  if (!("Notification" in window)) {
    alert("This browser does not support desktop notification");
  } else if (Notification.permission === "granted") {
    var notification = new Notification(message);
  } else if (Notification.permission !== "denied") {
    Notification.requestPermission().then(function (permission) {
      if (permission === "granted") {
        var notification = new Notification(message);
      }
    });
  }
}
sessionupdate();
async function getuser() {
  return new Promise((resolve) => {
    var xhr = new XMLHttpRequest();
    xhr.open(
      "GET",
      "https://" + new URL(location.href).hostname + "/api/v9/users/@me",
      true
    );
    xhr.setRequestHeader("Authorization", settings.token);
    xhr.setRequestHeader("Content-Type", "application/json");
    xhr.onload = function () {
      var data = JSON.parse(xhr.responseText);
      switch (xhr.status) {
        case 200:
          console.log(data);
          set_status("Valid Token");
          showNotification("Valid Token | Username: " + data.username);
          resolve(data);
          break;
        case 403:
          console.log("Unknown message");
          set_status("Forbidden Token");
          showNotification("Forbidden Token: " + data);
          noti;
          resolve(null);
          break;
        case 400:
          console.log(data);
          set_status("Token Error");
          showNotification("Token Error: " + data);
          resolve(null);
          break;
      }
    };
    xhr.onerror = function () {
      console.error("Request failed");
    };
    xhr.send();
  });
}
await getuser();
go();
let lastUrl = location.href;
setInterval(async function () {
  if (lastUrl !== location.href) {
    if (/https:\/\/discord\.com\/channels\/\d+\/\d+/.test(location.href)) {
      console.log("Discord channel URL detected: " + location.href);
      await go();
    }
    lastUrl = location.href;
  }
}, 1000);
async function go() {
  try {
    let isDiscordGuild =
      /^https:\/\/(canary\.|ptb\.)?discord\.com\/channels\/\d+\/\d+/.test(
        window.location.href
      );
    if (isDiscordGuild) {
      let parentElement = document.getElementsByClassName("toolbar__88c63")[0];
      let divHTML = `<div id="start" style="cursor: pointer" ><svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="24.000000pt" height="24.000000pt" viewBox="0 0 24.000000 24.000000" preserveAspectRatio="xMidYMid meet"><g transform="translate(0.000000,24.000000) scale(0.100000,-0.100000)" fill="hsl( 215 calc( 1* 8.8%) 73.3% / 1)" stroke="none"><path d="M111 187 l-93 -28 23 -25 c29 -31 38 -30 84 6 51 41 54 38 12 -13 l-35 -43 20 -27 c11 -15 23 -27 28 -27 10 0 62 156 58 174 -2 9 -27 5 -97 -17z"/></g></svg></div>`;
      if (parentElement) {
        parentElement.innerHTML = divHTML + parentElement.innerHTML;
      } else {
        console.log("No element found at the specified XPath.");
      }
      document.getElementById("start").addEventListener("click", async () => {
        const url = new URL(location.href);
        var guild = await getguild(url.pathname.split("/")[2]);
        var channel = await getchannel(
          url.pathname.split("/")[2],
          url.pathname.split("/")[3]
        );

        function home() {
          var element = document.querySelector(
            '[data-list-item-id="guildsnav___home"]'
          );
          element.click();
        }
        async function getguild(guildid) {
          return await new Promise((resolve) => {
            //check wit server if server has been dmed
            var xhr = new XMLHttpRequest();
            xhr.open(
              "GET",
              "https://" + url.hostname + "/api/v9/guilds/" + guildid,
              true
            );
            xhr.setRequestHeader("Authorization", settings.token);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onload = function () {
              var data = JSON.parse(xhr.responseText);
              switch (xhr.status) {
                case 200:
                  console.log(data);
                  resolve(data);
                  return data;
                  //in server
                  break;
                case 403:
                  //unknown message
                  break;
                case 400:
                  //captcha asked
                  console.log(data);
                  resolve(null);
                  break;
              }
            };
            xhr.onerror = function () {
              console.error("Request failed");
            };
            xhr.send();
          });
        }
        async function getchannel(guildid, channel_id) {
          return await new Promise((resolve) => {
            //check wit server if server has been dmed
            var xhr = new XMLHttpRequest();
            xhr.open(
              "GET",
              "https://" +
                url.hostname +
                "/api/v9/guilds/" +
                guildid +
                "/channels",
              true
            );
            xhr.setRequestHeader("Authorization", settings.token);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onload = async function () {
              switch (xhr.status) {
                case 200:
                  JSON.parse(xhr.responseText).find((obj) => {
                    //console.log(obj);
                    if (obj.id === channel_id) {
                      resolve(obj);
                      return obj;
                    }
                  });
                  //in server
                  break;
                case 403:
                  //unknown message
                  break;
              }
            };
            xhr.onerror = function () {
              console.error("Request failed");
            };
            xhr.send();
          });
        }
        async function memberids(guildid, roleid) {
          return new Promise((resolve) => {
            var xhr = new XMLHttpRequest();
            xhr.open(
              "GET",
              "https://" +
                url.hostname +
                "/api/v9/guilds/" +
                guildid +
                "/roles/" +
                roleid +
                "/member-ids",
              true
            );
            xhr.setRequestHeader("Authorization", settings.token);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onload = async function () {
              var data = JSON.parse(xhr.responseText);
              switch (xhr.status) {
                case 200:
                  resolve(data);
                  break;
                case 403:
                  console.log("Unknown message");
                  resolve(null);
                  break;
                case 400:
                  console.log(data);
                  resolve(null);
                  break;
              }
            };
            xhr.onerror = function () {
              console.error("Request failed");
            };
            xhr.send();
          });
        }
        async function createdm(userid, owner = false) {
          return new Promise((resolve) => {
            if (settings.bots.some((id) => id === userid)) {
              console.log("bot already");
              resolve();
              return;
            }
            if (settings.dmed.some((id) => id === userid)) {
              console.log("dmed already");
              resolve();
              return;
            }
            set_status("Created DM");
            console.log("created dm");
            var xhr = new XMLHttpRequest();
            xhr.open(
              "POST",
              "https://" + url.hostname + "/api/v9/users/@me/channels",
              true
            );
            xhr.setRequestHeader("Authorization", settings.token);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onload = async function () {
              var data = JSON.parse(xhr.responseText);
              switch (xhr.status) {
                case 200:
                  console.log(data);
                  //await setTimeout(async function () {
                  await delay(settings.timeouts.timeout7);
                  //open dm
                  var selector =
                    '[data-list-item-id^="private-channels-uid_"][data-list-item-id$="___' +
                    data["id"] +
                    '"]';
                  var element = document.querySelector(selector);
                  element.click();
                  //await setTimeout(async function () {
                  await delay(settings.timeouts.timeout6);
                  //checking whether its a bot or not
                  try {
                    document.getElementsByClassName(
                      "action_e4d3b9 button_afdfd9 lookFilled__19298 colorBrand_b2253e sizeTiny__1b8a2 grow__4c8a4"
                    )[0].innerText;
                  } catch {
                    console.log(
                      "You have found a undiscovered bot. ID: " + userid
                    );
                    settings.bots.push(userid);
                    console.log("Bot: " + userid);
                    deletedm(data["id"]);
                    set_status("Bot Found");
                    resolve();
                    return;
                  }
                  await delay(1000);
                  //add as a friend
                  document
                    .getElementsByClassName(
                      "action_e4d3b9 button_afdfd9 lookFilled__19298 colorBrand_b2253e sizeTiny__1b8a2 grow__4c8a4"
                    )[0]
                    .click();
                  set_status("Adding Friend");
                  //await setTimeout(async function () {
                  await delay(settings.timeouts.timeout2);
                  //whether the friend request was successful
                  var success = false;
                  while (!success) {
                    await delay(500);
                    switch (
                      document.getElementsByClassName(
                        "action_e4d3b9 button_afdfd9 lookFilled__19298 colorBrand_b2253e sizeTiny__1b8a2 grow__4c8a4"
                      )[0].innerText
                    ) {
                      case "Friend Request Sent":
                        console.log("Friend Added");
                        set_status("Friend Added");
                        success = true;
                        add_fq_adds();
                        break;
                      case "Add Friend":
                        console.log("Friend Captcha");
                        set_status("Captcha Check");
                        try {
                          var stop = false;
                          while (!stop) {
                            //check if there is anything
                            switch (
                              document
                                .getElementsByClassName("focusLock__10aa5")[0]
                                .getAttribute("aria-label")
                            ) {
                              case "Friend request failed":
                                await delay(settings.timeouts.timeout4);
                                document
                                  .getElementsByClassName(
                                    "primaryButton__78ebb button_afdfd9 lookFilled__19298 colorBrand_b2253e sizeXlarge__53ea0 grow__4c8a4"
                                  )[0]
                                  .click();
                                stop = true;
                                success = true;
                                break;
                              case "CAPTCHA":
                                async function checkForCaptcha() {
                                  let isCaptchaSolved = false;

                                  while (!isCaptchaSolved) {
                                    try {
                                      if (
                                        document
                                          .getElementsByClassName(
                                            "focusLock__10aa5"
                                          )[0]
                                          .getAttribute("aria-label") ===
                                        "Friend request failed"
                                      ) {
                                        await delay(settings.timeouts.timeout4);
                                        document
                                          .getElementsByClassName(
                                            "primaryButton__78ebb button_afdfd9 lookFilled__19298 colorBrand_b2253e sizeXlarge__53ea0 grow__4c8a4"
                                          )[0]
                                          .click();
                                        isCaptchaSolved = true;
                                        add_captchas_solved();
                                        stop = true;
                                        success = true;
                                      } else if (
                                        document
                                          .getElementsByClassName(
                                            "focusLock__10aa5"
                                          )[0]
                                          .getAttribute("aria-label") ===
                                        "CAPTCHA"
                                      ) {
                                        console.log("still captchaa");
                                        await new Promise((resolve) =>
                                          setTimeout(
                                            resolve,
                                            settings.timeouts.timeout5
                                          )
                                        );
                                      } else {
                                        console.log("captchasolved");
                                        await delay(settings.timeouts.timeout4);
                                        document
                                          .getElementsByClassName(
                                            "primaryButton__78ebb button_afdfd9 lookFilled__19298 colorBrand_b2253e sizeXlarge__53ea0 grow__4c8a4"
                                          )[0]
                                          .click();
                                        isCaptchaSolved = true;
                                        add_captchas_solved();
                                        stop = true;
                                      }
                                    } catch (error) {
                                      console.error(
                                        "Error in checkForCaptcha:",
                                        error
                                      );
                                      isCaptchaSolved = true; // Break the loop in case of an error
                                      stop = true;
                                    }
                                  }
                                }
                                await delay(500);
                                await checkForCaptcha();
                                break;

                              default:
                                console.log("No Captcha");
                                stop = true;
                                success = true;
                                break;
                            }
                            await delay(500);
                          }
                        } catch {
                          //no catpchas or problems
                          console.log("No Captcha");
                          stop = true;
                          success = true;
                        }
                        break;
                      default:
                        console.log("umm idk");
                        document
                          .getElementsByClassName(
                            "primaryButton-361sHl button-ejjZWC lookFilled-1H2Jvj colorBrand-2M3O3N sizeXlarge-2GQ4VO grow-2T4nbg"
                          )[0]
                          .click();
                        await delay(500);
                        break;
                    }
                  }
                  await delay(3500);
                  set_status("Sending DM");
                  //get message prompt
                  element = document.getElementsByClassName(
                    "markup_a7e664 editor__66464 slateTextArea__0661c fontSize16Padding__48818"
                  )[0];
                  await delay(250);
                  //write dmmessage
                  var event = new InputEvent("beforeinput", {
                    inputType: "insertText",
                    data: settings.dmmessage.replace(
                      "<userid>",
                      "<@" + userid + ">"
                    ),
                    bubbles: true,
                    cancelable: true,
                  });
                  element.dispatchEvent(event);
                  await delay(50);
                  //send the message
                  var ev = document.createEvent("Events");
                  ev.initEvent("keydown", true, true);
                  ev.keyCode = 13;
                  ev.which = 13;
                  ev.charCode = 13;
                  ev.key = "Enter";
                  ev.code = "Enter";
                  element.dispatchEvent(ev);
                  //check if message went thru
                  var success = false;
                  while (!success) {
                    await delay(2500);
                    const listItems = document
                      .getElementsByClassName("scrollerInner__059a5")[0]
                      .getElementsByTagName("li");
                    console.log(
                      listItems[listItems.length - 1]
                        .getElementsByClassName(
                          "markup_a7e664 messageContent__21e69"
                        )[0]
                        .innerText.substring(0, 4)
                    );

                    console.log(
                      settings.dmmessage
                        .replace("<userid>", "<@" + userid + ">")
                        .substring(0, 4)
                    );
                    switch (
                      listItems[listItems.length - 1]
                        .getElementsByClassName(
                          "markup_a7e664 messageContent__21e69"
                        )[0]
                        .innerText.substring(0, 4)
                    ) {
                      case "Your":
                        console.log("Bad DM");
                        await delay(1000);
                        await deletedm(data["id"]);
                        settings.dmed.push(userid);
                        success = true;
                        await delay(500);
                        break;

                      case "You ":
                        showNotification("⚠ Rate limited - New Account");
                        set_status("⚠ Rate limited - New Account");
                        await deletedm(data["id"]);
                        setTimeout(async function () {
                          showNotification("Finsihed DMING");
                          await delay(1000);
                        }, 1000);
                        break;
                      case settings.dmmessage
                        .replace("<userid>", "<@" + userid + ">")
                        .substring(0, 4):
                        console.log("DM Check");
                        set_status("DM Check");
                        await delay(1000);

                        try {
                          var stop = false;
                          while (!stop) {
                            console.log("restart");
                            await delay(1000);

                            //check if there is anything
                            ///html/body/div[1]/div[2]/div[1]/div[1]/div/div[2]/div/div/div/div/div[3]/div/div/div[1]/main/div[1]/div/div/ol/li[2]/div/div[1]/div
                            let node = document.evaluate(
                              "/html/body/div[1]/div[2]/div[1]/div[1]/div/div[2]/div/div/div/div/div[3]/div[2]/div/div[1]/main/div[1]/div/div/ol/li/div/div[1]/div",
                              document,
                              null,
                              XPathResult.FIRST_ORDERED_NODE_TYPE,
                              null
                            ).singleNodeValue;
                            if (node == null) {
                              node = document.evaluate(
                                "/html/body/div[1]/div[2]/div[1]/div[1]/div/div[2]/div/div/div/div/div[3]/div/div/div[1]/main/div[1]/div/div/ol/li/div/div[1]/div",
                                document,
                                null,
                                XPathResult.FIRST_ORDERED_NODE_TYPE,
                                null
                              ).singleNodeValue;
                            }
                            if (node == null) {
                              node = document.evaluate(
                                "/html/body/div[2]/div[2]/div[1]/div[1]/div/div[2]/div/div/div/div/div[2]/div[2]/div/div[1]/main/div[1]/div/div/ol/li/div/div[1]/div",
                                document,
                                null,
                                XPathResult.FIRST_ORDERED_NODE_TYPE,
                                null
                              ).singleNodeValue;
                            }
                            if (node == null) {
                              node = document.evaluate(
                                "/html/body/div[2]/div[2]/div[1]/div[1]/div/div[2]/div/div/div/div[2]/div[3]/div[2]/div/div[1]/main/div[1]/div/div/ol/li/div/div[1]/div",
                                document,
                                null,
                                XPathResult.FIRST_ORDERED_NODE_TYPE,
                                null
                              ).singleNodeValue;
                            }
                            if (node == null) {
                              node = document.evaluate(
                                "/html/body/div[1]/div[2]/div[1]/div[1]/div/div[2]/div/div/div/div[2]/div[2]/div[2]/div/div[1]/main/div[1]/div/div/ol/li/div/div[1]/div",
                                document,
                                null,
                                XPathResult.FIRST_ORDERED_NODE_TYPE,
                                null
                              ).singleNodeValue;
                            }
                            if (node == null) {
                              node = document.evaluate(
                                "/html/body/div[1]/div[2]/div[1]/div[1]/div/div[2]/div/div/div/div/div[2]/div[2]/div/div[1]/main/div[1]/div/div/ol/li/div/div[1]/div",
                                document,
                                null,
                                XPathResult.FIRST_ORDERED_NODE_TYPE,
                                null
                              ).singleNodeValue;
                            }
                            if (node == null) {
                              node = document.evaluate(
                                "/html/body/div[2]/div[2]/div[1]/div[1]/div/div[2]/div/div/div/div/div[3]/div[2]/div/div[1]/main/div[1]/div/div/ol/li/div/div[1]/div",
                                document,
                                null,
                                XPathResult.FIRST_ORDERED_NODE_TYPE,
                                null
                              ).singleNodeValue;
                            }
                            /*let node = document.evaluate(
                              "/html/body/div[2]/div[2]/div[1]/div[1]/div/div[2]/div/div/div/div/div[3]/div[2]/div/div[1]/main/div[1]/div/div",
                              document,
                              null,
                              XPathResult.FIRST_ORDERED_NODE_TYPE,
                              null
                            ).singleNodeValue.getElementsByClassName("messageContent__21e69")[0];*/

                            await delay(1000);

                            if (node == null) {
                              continue;
                            }
                            //isFailed__797dd
                            //isSending-3SiDwE
                            //isSending__6e109
                            console.log(node);
                            console.log(
                              node &&
                                node.classList.contains("isSending__6e109")
                            );
                            if (
                              node &&
                              !node.classList.contains("isSending__6e109")
                            ) {
                              console.log("Class is not present");
                              stop = true;
                            } else if (
                              node &&
                              node.classList.contains("isSending__6e109")
                            ) {
                              console.log("Class is present");
                              let isCaptchaSolved = false;

                              while (!isCaptchaSolved) {
                                try {
                                  if (
                                    document
                                      .getElementsByClassName(
                                        "focusLock__10aa5"
                                      )[0]
                                      .getAttribute("aria-label") ===
                                    "Friend request failed"
                                  ) {
                                    await delay(settings.timeouts.timeout4);
                                    document
                                      .getElementsByClassName(
                                        "primaryButton__78ebb button_afdfd9 lookFilled__19298 colorBrand_b2253e sizeXlarge__53ea0 grow__4c8a4"
                                      )[0]
                                      .click();
                                    isCaptchaSolved = true;
                                    add_captchas_solved();
                                    stop = true;
                                    success = true;
                                  } else if (
                                    document
                                      .getElementsByClassName(
                                        "focusLock__10aa5"
                                      )[0]
                                      .getAttribute("aria-label") === "CAPTCHA"
                                  ) {
                                    console.log("still captchaa");
                                    await new Promise((resolve) =>
                                      setTimeout(
                                        resolve,
                                        settings.timeouts.timeout5
                                      )
                                    );
                                  } else {
                                    console.log("captchasolved");
                                    isCaptchaSolved = true;
                                    add_captchas_solved();
                                    stop = true;
                                  }
                                } catch (error) {
                                  console.error(
                                    "Error in checkForCaptcha:",
                                    error
                                  );
                                  isCaptchaSolved = true; // Break the loop in case of an error
                                  stop = true;
                                }
                              }
                              stop = true;
                            } else if (
                              !node.classList.contains("isFailed__797dd9") &&
                              !node.classList.contains("isSending__6e109")
                            ) {
                              console.log("Dmed");
                              stop = true;
                            } else {
                              console.log("Node is not present");
                              //stop = true;
                            }
                          }
                          console.log("DM Sent");
                          set_status("DM Sent");
                          if (owner) {
                            console.log("he was a owner??");
                            add_owner_dms_sent();
                          }
                          add_dms_sent();
                          settings.dmed.push(userid);
                          await delay(1000);
                          stop = true;
                          success = true;
                        } catch (err) {
                          //no catpchas or problems
                          console.log(err);
                          console.log("No Captcha");
                          stop = true;
                          success = true;
                        }
                        break;
                      default:
                        console.log("umm idk");
                        document
                          .getElementsByClassName(
                            "primaryButton-361sHl button-ejjZWC lookFilled-1H2Jvj colorBrand-2M3O3N sizeXlarge-2GQ4VO grow-2T4nbg"
                          )[0]
                          .click();
                        await delay(500);
                        break;
                    }
                  }

                  /*var element;
                    try {
                      //get the message and check if it went thru successfully
                      var element = document.getElementsByClassName(
                        "scrollerInner__059a5"
                      )[0];
                      const listItems = element.getElementsByTagName("li");
                      element = listItems[
                        listItems.length - 1
                      ].getElementsByClassName(
                        "markup_a7e664 messageContent__21e69"
                      )[0].innerText;
                    }
                    catch {}
                    switch (element.substring(0, 5)) {
                      case "Your ":
                        console.log("bad dm AOSMINMASINASINASNIINASni");
                        await deletedm(data["id"]);
                        settings.dmed.push(userid);
                        resolve();
                        return;
                      case "You a":
                        showNotification("⚠ Rate limited - New Account");
                        set_status("⚠ Rate limited - New Account");
                        await deletedm(data["id"]);
                        setTimeout(async function() {
                          showNotification("Finsihed DMING");
                          await delay(1000);
                        }, 1000);
                        break;
                      case settings.dmmessage
                      .replace("<userid>", "<@" + userid + ">")
                      .substring(0, 5):
                        let intervalId = setInterval(async function() {
                          let node = document.evaluate(  "/html/body/div[1]/div[3]/div[1]/div[1]/div/div[2]/div/div/div/div[2]/div[2]/div[2]/main/div[1]/div/div/ol/li/div/div[1]/div",  document,  null,  XPathResult.FIRST_ORDERED_NODE_TYPE,  null).singleNodeValue;
                          if (  node &&  node.classList.contains("isSending-3SiDwE") ===  false) {
                            console.log("Class is not present");
                            clearInterval(intervalId);
                          }
                          else if (node) {
                            console.log("Class is present");
                          }
                          else {
                            console.log("Node is not present");
                          }
                        }, 100);
                        console.log("dm sent");
                        if (owner) {
                          add_owner_dms_sent();
                        }
                        add_dms_sent();
                        settings.dmed.push(userid);
                        resolve();
                        break;
                      default:
                        console.log("dm sent?");
                        add_dms_sent();
                        settings.dmed.push(userid);
                        resolve();
                        return;
                    }*/
                  break;
                case 403:
                  //unknown message
                  break;
                case 400:
                  //captcha asked
                  console.log(data);
                  console.log("PROBLEM createdm CAPTCHA");
                  break;
              }
              console.log("closed dm");
              resolve(null);
            };
            xhr.onerror = function () {
              console.error("Request failed");
            };
            xhr.send('{"recipients":["' + userid + '"]}');
          });
        }
        async function deletedm(channelid) {
          return new Promise((resolve) => {
            //check wit server if server has been dmed
            var xhr = new XMLHttpRequest();
            xhr.open(
              "DELETE",
              "https://" +
                url.hostname +
                "/api/v9/channels/" +
                channelid +
                "?silent=false",
              true
            );
            xhr.setRequestHeader("Authorization", settings.token);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onload = async function () {
              var data = JSON.parse(xhr.responseText);
              switch (xhr.status) {
                case 200:
                  console.log(data);
                  resolve();
                  break;
                case 403:
                  //unknown message
                  break;
                case 400:
                  //captcha asked
                  console.log(data);
                  console.log("PROBLEM deletedm CAPTCHA");
                  resolve();
                  break;
              }
            };
            xhr.onerror = function () {
              console.error("Request failed");
            };
            xhr.send();
          });
        }

        function captchaCheck() {
          return new Promise(async (resolve) => {
            setTimeout(async () => {
              set_status("Captcha Check");
              try {
                //check if there is anything
                switch (
                  document
                    .getElementsByClassName("focusLock__10aa5")[0]
                    .getAttribute("aria-label")
                ) {
                  case "Friend request failed":
                    await delay(settings.timeouts.timeout4);
                    document
                      .getElementsByClassName(
                        "primaryButton__78ebb button_afdfd9 lookFilled__19298 colorBrand_b2253e sizeXlarge__53ea0 grow__4c8a4"
                      )[0]
                      .click();
                    resolve("friendoff");
                    break;
                  case "CAPTCHA":
                    var secondcheck = false;

                    function checkForCaptcha() {
                      try {
                        if (
                          document
                            .getElementsByClassName("focusLock__10aa5")[0]
                            .getAttribute("aria-label") === "CAPTCHA"
                        ) {
                          setTimeout(
                            checkForCaptcha,
                            settings.timeouts.timeout5
                          );
                          console.log("still captcha");
                        } else {
                          console.log("captchasolved");
                          resolve(null);
                        }
                      } catch {
                        if (secondcheck) {
                          console.log("captcha solve confirmed");
                          add_captchas_solved();
                          resolve(null);
                          return;
                        }
                        console.log("captchasolved");
                        secondcheck = true;
                        setTimeout(checkForCaptcha, settings.timeouts.timeout5);
                      }
                    }
                    checkForCaptcha();
                    break;
                  default:
                    console.log("nothin");
                    resolve(null);
                }
              } catch {
                //no catpchas or problems
                console.log("nothin");
                resolve(null);
              }
            }, settings.timeouts.timeout3);
          });
        }
        home();
        await delay(settings.timeouts.timeout8);
        console.log("owner start");
        set_status("Sending Owner DM");
        await createdm(guild["owner_id"], true);
        await delay(100);
        console.log("owner done");
        if (settings.roles_dm) {
          for (const item of guild["roles"]) {
            var permissionValue = BigInt(item["permissions"].toString());
            var administratorPermission = BigInt(0x0000000000000008);
            if (
              (permissionValue & administratorPermission) ===
              administratorPermission
            ) {
              set_status("Scraping Roles");
              var data = await memberids(guild["id"], item["id"]);
              //console.log(data);
              for (const user of data) {
                await createdm(user, false);
                await delay(settings.timeouts.timeout9);
              }
              await delay(settings.timeouts.timeout10);
            }
          }
        }
        if (settings.channel_dm) {
          channel.permission_overwrites.forEach(async (item) => {
            var permissionValue = BigInt(item["allow"].toString());
            var messagePermission = BigInt(0x0000000000000800);
            if ((permissionValue & messagePermission) === messagePermission) {
              switch (BigInt(item["allow"].toString())) {
                case 0:
                  //role
                  //console.log(item);
                  set_status("Scraping Channels");
                  var data = await memberids(guild["id"], item["id"]);
                  console.log(data);
                  for (const user of data) {
                    await createdm(user, false);
                    await delay(settings.timeouts.timeout9);
                  }
                  break;
                case 1:
                  //member
                  await createdm(item["id"].toString(), "None");
                  await delay(settings.timeouts.timeout9);
                  break;
              }
            }
          });
        }
        add_servers_dmed();
        if (settings.stats.dms_sent >= settings.min_dm_per_server) {
          set_status("Finished DMing");
          showNotification("Finished DMING");
          settings.stats.dms_sent = 0;
        } else {
          set_status("Join Another Server");
          showNotification("Join another Server");
        }
      });
    }
  } catch (err) {
    console.log("rawr: " + err);
  }
}
